<!-- LISA's CODE -->


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <title>Document</title>
</head>
<body>
    <div id="resetButton">
        <button data-reset="1">Reset</button>
    </div>
    <br>
    <div id="peopleSearch">
        <form id="people-form">
            <label for="people-input">Search a band!</label>
            <input type="text" id="people-input"><br>
            <br>
            <!-- Button triggers new movie to be added -->
            <input id="add-people" type="submit" value="Search">
        </form>
    </div>
    <div id="gifsGoHere"></div>


<script type="text/javascript">

/////// GABE's CODE//////////////

var API_KEY = "SrukemE16v6dIJlj";


    $("#add-people").on("click", function(event){
        event.preventDefault();

        var bandQuery = $("#people-input").val().trim();

        //URL for pulling band ID
        var queryURL = "https://api.songkick.com/api/3.0/search/artists.json?apikey=" + API_KEY + "&query=" + bandQuery;

        //pulls band ID

            $.ajax({
                    url: queryURL,
                    method: "GET", 
                }).then(function(response){

                    var bandID = response.resultsPage.results.artist[0].id;
        
        
            //function takes ID from API
            function eventData(apiID){
                var eventQueryURL = 
                "https://api.songkick.com/api/3.0/artists/"+ apiID +"/calendar.json?apikey=" + API_KEY+"&per_page=10";

            //pull event data using bandID from previous pull
                $.ajax({
                    url: eventQueryURL,
                    method: "GET",
                }).then(function(response){

                    console.log(response);
                    
                    //isolate event array
                    var eventArr = response.resultsPage.results.event;

                // loop through events array to get information for first 10 results
                //create jquery div to place on html
                
                    for (var i=0; i<eventArr.length; i++){

                        console.log(eventArr[i]);

                    

                    }

                });
            }


            //function to pull similar artists
            function similarArtists(apiID){
                var similarArtistsURL =
                 "https://api.songkick.com/api/3.0/artists/"+apiID+"/similar_artists.json?apikey="+API_KEY+"&per_page=5";
                 $.ajax({
                    url: similarArtistsURL,
                    method: "GET",
                }).then(function(response){
                    console.log(response);

                function createDIV(){

                
                    //isolate similar artists array
                    var simArtArr = response.resultsPage.results.artist;

                    //var artDiv = $("#")

                    //loop through array to isolate each similar artist
                    for(var i=0; i<simArtArr.length; i++){

                        console.log(simArtArr.length);

                    //create div element to hold similar band contents
                    var simaArtDiv = $("<div>");

                    $(simaArtDiv).text(simArtArr[i].displayName);

                    $("#gifsGoHere").append(simaArtDiv);

                    
                    }
                } 
                createDIV();   
                })
                
            }

            // calls eventData and similar artists function passing in the bandID
            eventData(bandID); 
            similarArtists(bandID);
        });
    });

        </script>
    </body>
</html>

